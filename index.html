<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>كأس منصور بن زايد 2026</title>

<script src="https://cdn.tailwindcss.com"></script>

<style>
body { font-family: sans-serif; }
.page-section { display: none; }
.page-section.active { display: block; }
.active-tab { border-bottom: 3px solid #f6c34a; color: #0d3aa3; }
</style>
</head>

<body class="bg-gray-100 min-h-screen">

<header class="bg-white shadow sticky top-0">
<div class="container mx-auto p-4 text-center">
<h1 class="text-2xl font-bold text-blue-800">كأس منصور بن زايد</h1>
<p class="text-gray-600">بطولة 2026</p>

<nav class="mt-4 flex justify-center gap-4">
<button class="active-tab" data-page="home">الرئيسية</button>
<button data-page="teams">الفرق</button>
<button data-page="players">اللاعبين</button>
<button data-page="matches">المباريات</button>
</nav>
</div>
</header>

<main class="container mx-auto p-6">

<section id="home-page" class="page-section active">
<div class="bg-blue-900 text-white p-8 rounded-xl text-center">
<h2 class="text-3xl font-bold">بطولة كأس منصور بن زايد 2026</h2>
</div>
</section>

<section id="teams-page" class="page-section">
<h2 class="text-2xl font-bold mb-4">الفرق</h2>
<div id="teams-container"></div>
</section>

<section id="players-page" class="page-section">
<h2 class="text-2xl font-bold mb-4">اللاعبين</h2>
<div id="players-container"></div>
</section>

<section id="matches-page" class="page-section">
<h2 class="text-2xl font-bold mb-4">المباريات</h2>
<div id="matches-container"></div>
</section>

</main>

<script>

const SHEET_ID = "2PACX-1vTxlAw9iO9hZu5eCbnxohA2Efxgf-a-a8l-xidzs_8ShFVcF5Z8Hb5wJRqJxV564ELWiXskpfyNkveP";

const SHEETS = {
  teams:   { gid: "624074873" },
  players: { gid: "374566661" },
  matches: { gid: "140432292" }
};

function parseGViz(text){
  const start = text.indexOf('{');
  const end = text.lastIndexOf('}');
  return JSON.parse(text.substring(start, end+1));
}

async function loadData(page){
  const config = SHEETS[page];
  const container = document.getElementById(page + "-container");
  if(!config || !container) return;

  container.innerHTML = "جاري التحميل...";

  const url = `https://docs.google.com/spreadsheets/d/e/${SHEET_ID}/gviz/tq?gid=${config.gid}&tqx=out:json`;

  try{
    const res = await fetch(url);
    const text = await res.text();
    const json = parseGViz(text);

    const rows = json.table.rows || [];
    container.innerHTML = "";

    rows.forEach(r=>{
      const val = r.c[0]?.v || "";
      if(!val) return;
      container.innerHTML += `
        <div class="bg-white p-4 rounded shadow mb-2 text-blue-800 font-bold">
          ${val}
        </div>
      `;
    });

  }catch(e){
    container.innerHTML = "فشل تحميل البيانات";
    console.error(e);
  }
}

function showPage(page){
  document.querySelectorAll(".page-section").forEach(s=>s.classList.remove("active"));
  document.getElementById(page+"-page").classList.add("active");

  document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active-tab"));
  document.querySelector(`[data-page="${page}"]`).classList.add("active-tab");

  if(SHEETS[page]) loadData(page);
}

document.querySelectorAll("nav button").forEach(btn=>{
  btn.addEventListener("click", ()=> showPage(btn.dataset.page));
});

</script>

</body>
</html>
